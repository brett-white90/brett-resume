<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SC Analytics - Brett White</title>
    <link rel="stylesheet" href="styles/style.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
            body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        background: var(--mainBgColor, #1a1a1a);
        color: #fff;
    }

    #container-main {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding: 24px;
        gap: 24px;
    }

    /* Navigation */
    .nav-section {
        padding: 0 0 12px 0;
    }

    .nav-back {
        width: 160px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        text-decoration: none;
        font-family: monospace;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
    }

    /* Metrics Section */
    .dashboard {
        display: grid;
        gap: 24px;
        grid-template-columns: repeat(5, 1fr);
        height: 140px; /* Fixed height for metrics row */
    }

    .metric-card {
        background: rgba(30, 31, 34);
        border-radius: 8px;
        padding: 16px;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow: hidden; /* Prevent spillage */
    }

    .metric-card h3 {
        margin: 0;
        font-size: 14px;
        opacity: 0.9;
        white-space: nowrap;
    }

    /* Charts Section */
    .charts-grid {
        display: grid;
        gap: 24px;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, minmax(350px, 1fr));
        flex: 1; /* Take up remaining space */
    }

    .chart-container {
        background: rgba(30, 31, 34);
        border-radius: 8px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        height: 100%; /* Fill container height */
        min-height: 350px;
        overflow: hidden; /* Prevent spillage */
    }

    .chart-container h3 {
        margin: 0 0 16px 0;
        font-size: 14px;
        color: #fff;
    }

    /* Specific chart containers */
    #category-chart-main {
        flex: 1;
        min-height: 0; /* Allow container to shrink */
    }

    #category-chart-brush {
        height: 80px;
        margin-top: 16px;
    }

    /* Responsive adjustments */
    @media (max-width: 1400px) {
        .dashboard {
            grid-template-columns: repeat(3, 1fr);
            height: auto;
            grid-auto-rows: 140px;
        }
    }

    @media (max-width: 1200px) {
        .charts-grid {
            grid-template-columns: 1fr;
            grid-template-rows: repeat(4, 350px);
        }
    }

    @media (max-width: 768px) {
        .dashboard {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 480px) {
        .dashboard {
            grid-template-columns: 1fr;
        }
        
        #container-main {
            padding: 16px;
            gap: 16px;
        }
    }
    </style>
</head>
<body>
    <div id="container-main">
        <!-- Navigation -->
        <div class="nav-section">
            <a href="index.html" class="nav-back">
                ‚Üê Back Home
            </a>
        </div>

        <!-- Metrics Section -->
        <div class="dashboard">
            <div id="arr-influence" class="metric-card">
                <h3>ARR Influence</h3>
                <div id="arr-metric"></div>
            </div>
            <div id="acv" class="metric-card">
                <h3>ACV</h3>
                <div id="acv-metric"></div>
            </div>
            <div id="days-to-close" class="metric-card">
                <h3>Average Days to Close</h3>
                <div id="days-metric"></div>
            </div>
            <div id="win-rate" class="metric-card">
                <h3>Win Rate</h3>
                <div id="win-metric"></div>
            </div>
            <div id="lead-consultant" class="metric-card">
                <h3>Lead Consultant</h3>
                <div id="lead-metric"></div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
            <div class="chart-container">
                <h3>Closed ARR by Projected Pipeline</h3>
                <div id="category-chart-main"></div>
                <div id="category-chart-brush"></div>
            </div>
            
            <div class="chart-container">
                <h3>Top 10 Modules</h3>
                <div id="modules-chart"></div>
            </div>
            
            <div class="chart-container">
                <h3>ARR by Category</h3>
                <div id="arr-category-chart"></div>
            </div>
            
            <div class="chart-container">
                <h3>Closed ARR by Customer Size</h3>
                <div id="size-chart"></div>
            </div>
        </div>
    </div>
        <!-- Metrics Script Charts -->
        <script>
   document.addEventListener('DOMContentLoaded', function() {
    const arrMetric = new ApexCharts(document.querySelector("#arr-metric"), {
        series: [{
            name: 'ARR',
            data: [
                258919, 50200, 365908, 241075,    // 2020
                302476, 455752, 286132, 85187,    // 2021
                278348, 183575, 187348, 416701,   // 2022
                690434, 1234688, 286132, 132192,  // 2023
                403245, 940433, 771603, 339392    // 2024
            ]
        }],
        chart: {
            height: 100,
            type: 'area',
            sparkline: { enabled: true },
            background: 'transparent'
        },
        stroke: {
            curve: 'smooth',
            width: 2,
        },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.7,
                opacityTo: 0.2
            }
        },
        colors: ['#00E396'],
        tooltip: {
            x: {
                formatter: function(val, opts) {
                    const quarters = [
                        'Q1 2020', 'Q2 2020', 'Q3 2020', 'Q4 2020',
                        'Q1 2021', 'Q2 2021', 'Q3 2021', 'Q4 2021',
                        'Q1 2022', 'Q2 2022', 'Q3 2022', 'Q4 2022',
                        'Q1 2023', 'Q2 2023', 'Q3 2023', 'Q4 2023',
                        'Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024'
                    ];
                    return quarters[opts.dataPointIndex];
                }
            },
            y: {
                formatter: function(val) {
                    return new Intl.NumberFormat('en-US', {
                        style: 'currency',
                        currency: 'USD',
                        maximumFractionDigits: 0
                    }).format(val);
                }
            }
        },
        title: {
            text: '$14,576,638',
            align: 'left',
            style: { fontSize: '22px', color: '#fff', fontWeight: 600 }
        },
        subtitle: {
            text: '+14.2% Avg QoQ',
            align: 'left',
            style: { fontSize: '14px', color: '#00E396' }
        }
    });

    // ACV - Line Chart
    const acvMetric = new ApexCharts(document.querySelector("#acv-metric"), {
        series: [{
            name: 'ACV',
            data: [21.5, 23.2, 24.7, 24.9, 24.5, 24.8, 25.9]
        }],
        chart: {
            height: 100,
            type: 'area',
            sparkline: { enabled: true },
            background: 'transparent'
        },
        stroke: { curve: 'smooth', width: 2 },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.7,
                opacityTo: 0.2
            }
        },
        colors: ['#00E396'],
        title: {
            text: '$25,983',
            align: 'left',
            style: { fontSize: '22px', color: '#fff', fontWeight: 600 }
        },
        subtitle: {
            text: '+15% QoQ',
            align: 'left',
            style: { fontSize: '14px', color: '#00E396' }
        }
    });

    // Days to Close - Line Chart
    const daysMetric = new ApexCharts(document.querySelector("#days-metric"), {
        series: [{
            name: 'Days',
            data: [42, 40, 38, 35, 39, 38, 40]
        }],
        chart: {
            height: 100,
            type: 'area',
            sparkline: { enabled: true }
        },
        stroke: { curve: 'smooth', width: 2 },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.7,
                opacityTo: 0.2
            }
        },
        colors: ['#00E396'],
        title: {
            text: '40 Days',
            align: 'left',
            style: { fontSize: '22px', color: '#fff', fontWeight: 600 }
        },
        subtitle: {
            text: '-10% vs Prev',
            align: 'left',
            style: { fontSize: '14px', color: '#00E396' }
        }
    });

    // Win Rate - Radial Chart
    const winMetric = new ApexCharts(document.querySelector("#win-metric"), {
        series: [46],
        chart: {
            height: 150,
            type: 'radialBar',
            sparkline: { enabled: true }
        },
        plotOptions: {
            radialBar: {
                startAngle: -90,
                endAngle: 90,
                track: {
                    background: "#2C3036",
                    strokeWidth: '97%',
                },
                dataLabels: {
                    name: { show: false },
                    value: {
                        fontSize: '22px',
                        color: '#fff',
                        fontWeight: 600,
                        offsetY: -2
                    }
                }
            }
        },
        fill: { colors: ['#00E396'] }
        
    });

    // Lead Consultant - Radial Chart
    const leadMetric = new ApexCharts(document.querySelector("#lead-metric"), {
        series: [92],
        chart: {
            height: 150,
            type: 'radialBar',
            sparkline: { enabled: true }
        },
        plotOptions: {
            radialBar: {
                startAngle: -90,
                endAngle: 90,
                track: {
                    background: "#2C3036",
                    strokeWidth: '97%',
                },
                dataLabels: {
                    name: { show: false },
                    value: {
                        fontSize: '22px',
                        color: '#fff',
                        fontWeight: 600,
                        offsetY: -2
                    }
                }
            }
        },
        fill: { colors: ['#00E396'] }
    });

    // Render all charts
    arrMetric.render();
    acvMetric.render();
    daysMetric.render();
    winMetric.render();
    leadMetric.render();
});
        
        </script>


        <!-- Chart Section Script -->
    
        
        <script>
           var data = generateDayWiseTimeSeries(new Date("22 Apr 2024").getTime(), 115, {
                    min: 30,
                    max: 90
                    });
                    var options1 = {
                    chart: {
                        id: "chart2",
                        type: "area",
                        height: 230,
                        foreColor: "#ccc",
                        toolbar: {
                        autoSelected: "pan",
                        show: false
                        }
                    },
                    colors: ["#00BAEC"],
                    stroke: {
                        width: 3
                    },
                    grid: {
                        borderColor: "#555",
                        clipMarkers: false,
                        yaxis: {
                        lines: {
                            show: false
                        }
                        }
                    },
                    dataLabels: {
                        enabled: false
                    },
                    fill: {
                        gradient: {
                        enabled: true,
                        opacityFrom: 0.55,
                        opacityTo: 0
                        }
                    },
                    markers: {
                        size: 5,
                        colors: ["#000524"],
                        strokeColor: "#00BAEC",
                        strokeWidth: 3
                    },
                    series: [
                        {
                        data: data
                        }
                    ],
                    tooltip: {
                        theme: "dark"
                    },
                    xaxis: {
                        type: "datetime"
                    },
                    yaxis: {
                        min: 0,
                        tickAmount: 4
                    }
                    };

                    var chart1 = new ApexCharts(document.querySelector("#category-chart-main"), options1);

                    chart1.render();

                    var options2 = {
                    chart: {
                        id: "chart1",
                        height: 130,
                        type: "bar",
                        foreColor: "#ccc",
                        brush: {
                        target: "chart2",
                        enabled: true
                        },
                        selection: {
                        enabled: true,
                        fill: {
                            color: "#fff",
                            opacity: 0.4
                        },
                        xaxis: {
                            min: new Date("27 Jul 2024 10:00:00").getTime(),
                            max: new Date("14 Aug 2024 10:00:00").getTime()
                        }
                        }
                    },
                    colors: ["#FF0080"],
                    series: [
                        {
                        data: data
                        }
                    ],
                    stroke: {
                        width: 2
                    },
                    grid: {
                        borderColor: "#444"
                    },
                    markers: {
                        size: 0
                    },
                    xaxis: {
                        type: "datetime",
                        tooltip: {
                        enabled: false
                        }
                    },
                    yaxis: {
                        tickAmount: 2
                    }
                    };

                    var chart2 = new ApexCharts(document.querySelector("#category-chart-brush"), options2);

                    chart2.render();

                    function generateDayWiseTimeSeries(baseval, count, yrange) {
                    var i = 0;
                    var series = [];
                    while (i < count) {
                        var x = baseval;
                        var y =
                        Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

                        series.push([x, y]);
                        baseval += 86400000;
                        i++;
                    }
                    return series;
                    }

        </script>

        <script>
            var options = {
                    series: [3976543, 2876432, 2456789, 1876543, 1567890, 856432, 756432, 211141],
                    chart: {
                        type: 'donut',
                        height: 350,
                        foreColor: "#ccc",
                    },
                    colors: ['#00E396', '#00BAEC', '#775DD0', '#FF4560', '#FEB019', '#2E93FA', '#66DA26', '#FF66B3'],
                    labels: ['Platform', 'Subscription Upgrade', 'Infrastructure', 'Support', 'Renewal', 'Analytics', 'Commerce', 'Accounting'],
                    dataLabels: {
                        enabled: true,
                        formatter: function (val) {
                            return val.toFixed(1) + "%"
                        }
                    },
                    plotOptions: {
                        pie: {
                            donut: {
                                size: '70%',
                                labels: {
                                    show: true,
                                    total: {
                                        show: true,
                                        label: 'Total ARR',
                                        formatter: function (w) {
                                            return new Intl.NumberFormat('en-US', { 
                                                style: 'currency', 
                                                currency: 'USD',
                                                minimumFractionDigits: 0,
                                                maximumFractionDigits: 0
                                            }).format(14576638);
                                        }
                                    }
                                }
                            }
                        }
                    },
                    legend: {
                        position: 'right',
                        offsetX: 120,
                        offsetY: 60,
                        height: 290,
                        formatter: function(val, opts) {
                            return val
                        }
                    }
                };

                var chart = new ApexCharts(document.querySelector("#arr-category-chart"), options);
                chart.render();
        </script>

            

        <script>
            
            var options = {
    series: [{
        data: [479612, 421589, 289756, 273433, 173623, 151567, 89403, 34613, 29483, 24838]
    }],
    chart: {
        type: 'bar',
        height: 350,
        foreColor: '#fff'
    },
    plotOptions: {
        bar: {
            borderRadius: 4,
            borderRadiusApplication: 'end',
            horizontal: true,
        }
    },
    dataLabels: {
        enabled: true,
        formatter: function(val) {
            return '$' + val.toLocaleString();
        }
    },
    xaxis: {
        categories: ['CRM', 'OneWorld', 'Analytics Warehouse', 'Ecommerce', 'Planning & Budgeting', 
                    'Connector', 'CPQ', 'Work Orders', 'Fixed Assets', 'Payroll'],
        labels: {
            style: {
                colors: '#fff'
            }
        }
    },
    yaxis: {
        labels: {
            style: {
                colors: '#fff'
            }
        }
    }
};

var chart = new ApexCharts(document.querySelector("#modules-chart"), options);
chart.render();
        
        </script>

        <script>
                 var options = {
                series: [
                {
                    data: [
                    {
                        x: 'New Delhi',
                        y: 218
                    },
                    {
                        x: 'Kolkata',
                        y: 149
                    },
                    {
                        x: 'Mumbai',
                        y: 184
                    },
                    {
                        x: 'Ahmedabad',
                        y: 55
                    },
                    {
                        x: 'Bangaluru',
                        y: 84
                    },
                    {
                        x: 'Pune',
                        y: 31
                    },
                    {
                        x: 'Chennai',
                        y: 70
                    },
                    {
                        x: 'Jaipur',
                        y: 30
                    },
                    {
                        x: 'Surat',
                        y: 44
                    },
                    {
                        x: 'Hyderabad',
                        y: 68
                    },
                    {
                        x: 'Lucknow',
                        y: 28
                    },
                    {
                        x: 'Indore',
                        y: 19
                    },
                    {
                        x: 'Kanpur',
                        y: 29
                    }
                    ]
                }
                ],
                legend: {
                show: false
                },
                chart: {
                height: 350,
                type: 'treemap'
                },
                title: {
                text: ''
                }
                };

        var chart = new ApexCharts(document.querySelector("#size-chart"), options);
        chart.render();

        </script>

</body>
</html>